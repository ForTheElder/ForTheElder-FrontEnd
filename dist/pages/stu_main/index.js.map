{"version":3,"file":"pages/stu_main/index.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAIA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AAoFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AAhHA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AAIA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAEA;AAAA;AAAA;AAEA;AAAA;AAAA;AAEA;AAAA;AAAA;AAEA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAiCA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAIA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAIA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAIA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;ACxNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://theolder/._src_pages_stu_main_index.jsx","webpack://theolder/./src/pages/stu_main/index.jsx?76f0"],"sourcesContent":["import React, { Component } from 'react'\r\nimport Taro from '@tarojs/taro'\r\nimport { View, Image } from '@tarojs/components'\r\nimport './index.less'\r\nimport { Fetch } from '../../service/fetch'\r\n\r\n\r\n\r\nexport default class Main extends Component {\r\n\r\n  constructor() {\r\n    super(...arguments);\r\n    this.state = {\r\n      currentBoxId: 'one',\r\n      activities: [],\r\n      activities1: [],\r\n      offset: '0',\r\n      id:''\r\n    };\r\n  }\r\n\r\n  //获取活动数据\r\n  componentWillMount() {\r\n    const offset = this.state.offset\r\n\r\n    Fetch(\r\n      `/service/student/service/query/all/${offset}`,\r\n      {},\r\n      'GET',\r\n      {Authorization: Taro.getStorageSync('token')}\r\n      )\r\n      .then(res => {\r\n          console.log(res.orActivityDTOS)\r\n          if(res.orActivityDTOS!==null){\r\n              this.setState({\r\n                  activities: res.orActivityDTOS,\r\n              })\r\n          }\r\n          }).catch(() => {\r\n          Taro.showToast({\r\n              icon: 'none',\r\n              title: '跳转错误'\r\n          });\r\n      })\r\n      Fetch(\r\n        `/organization/service/query/all/${offset}`,\r\n        {},\r\n        'GET',\r\n        {Authorization: Taro.getStorageSync('token')}\r\n        )\r\n        .then(res => {\r\n            console.log(res.orActivityDTOS)\r\n            if(res.orActivityDTOS!==null){\r\n                this.setState({\r\n                    activities1: res.orActivityDTOS,\r\n                })\r\n            }\r\n            }).catch(() => {\r\n            Taro.showToast({\r\n                icon: 'none',\r\n                title: '跳转错误'\r\n            });\r\n        })\r\n  }\r\n\r\n  componentDidMount() { }\r\n\r\n  componentWillUnmount() { }\r\n\r\n  componentDidShow() { }\r\n\r\n  componentDidHide() { }\r\n\r\n  componentWillReceiveProps() { }\r\n\r\n  changeBox(e) {\r\n    let currentFlag = e.currentTarget.id;\r\n    switch (currentFlag) {\r\n      case 'one':\r\n        this.setState({\r\n          currentBoxId: 'one'\r\n        })\r\n        break;\r\n      case 'two':\r\n        this.setState({\r\n          currentBoxId: 'two'\r\n        })\r\n    }\r\n  }\r\n\r\n  // toXiangqing() {\r\n  //   Taro.navigateTo({ url: '/pages/xiangqing/index' })\r\n  // }\r\n  // 上面代码改为\r\n  handleitem=(id)=>{\r\n    console.log(typeof id)\r\n    console.log(id,'111111111111111')\r\n    Taro.setStorage({\r\n      key: 'id',\r\n      data: id\r\n    });\r\n    Taro.navigateTo({\r\n      url:'/pages/stu_xiangqing/index?id='+id\r\n    })\r\n    return 1\r\n  }\r\n\r\n  handleitem1=(id)=>{\r\n    console.log(id,'111111111111111')\r\n    Taro.setStorage({\r\n      key: 'id',\r\n      data: id\r\n    });\r\n    Taro.navigateTo({\r\n      url:'/pages/stu_xiangqing1/index?id='+id\r\n    })\r\n    return 1\r\n  }\r\n  \r\n  onPullDownRefresh=()=>{\r\n    this.setState({\r\n      offset:((this.offset)+1).toString()\r\n    })\r\n    console.log(this.offset)\r\n  }\r\n  \r\n  render() {\r\n    const {activities, activities1} = this.state\r\n    return (\r\n      <View className='main_container'>\r\n        <View className='activity_btns'>\r\n          <View id='one' onClick={this.changeBox.bind(this)} className={this.state.currentBoxId === \"one\" ? \"activity_btn active2\" : \"activity_btn\"}>个人活动</View>\r\n          <View id='two' onClick={this.changeBox.bind(this)} className={this.state.currentBoxId === \"two\" ? \"activity_btn active2\" : \"activity_btn\"}>团体活动</View>\r\n        </View>\r\n        <View>\r\n          <View id='one' className={this.state.currentBoxId === \"one\" ? \"show\" : \"hidden\"}>\r\n            \r\n            {/* 获取所有发布的活动接口 */}\r\n            {activities.map((activity) => {\r\n              // const id = activity.id\r\n              return (\r\n                  <View className='activity_box' onClick={()=>this.handleitem(activity.id)} key={activity.id}>\r\n                    <View className='activity_image'>\r\n                      <Image src={`${activity.icon}`} alt=''></Image>\r\n                      <View className='activity_absoluted'>{activity.isCompleted=='0'?'活动报名中':'报名已结束'}</View>\r\n                    </View>\r\n                    <View className='activity_title'>{activity.title}</View>\r\n                    <View className='activity_text'>时间：{activity.beginTime}-{activity.endTime}</View>\r\n                    <View className='activity_text last'>地点：{activity.address}</View>\r\n                    {/* <View className='activity_text last'>招募人数：{activity.count}/{activity.num}</View> */}\r\n                  </View>\r\n                  )\r\n              })}\r\n            \r\n            <View className='activity_box'>\r\n              <View className='activity_image'>\r\n                <Image src='http://rt23tifhy.hb-bkt.clouddn.com/bg1.png' alt=''></Image>\r\n                <View className='activity_absoluted'>活动报名中</View>\r\n              </View>\r\n              <View className='activity_title'>家庭公益服务（帮助理发）</View>\r\n              <View className='activity_text'>时间：2021/05/06  09:00-12:00</View>\r\n              <View className='activity_text'>地点：华中师范大学西区教工宿舍14</View>\r\n              <View className='activity_text last'>报名人数：0/2</View>\r\n            </View>\r\n            <View className='activity_box'>\r\n              <View className='activity_image'>\r\n                <Image src='http://rt23tifhy.hb-bkt.clouddn.com/bg1.png' alt=''></Image>\r\n                <View className='activity_absoluted'>活动报名中</View>\r\n              </View>\r\n              <View className='activity_title'>代买代办</View>\r\n              <View className='activity_text'>时间：2021/05/06  09:00-12:00</View>\r\n              <View className='activity_text'>地点：华中师范大学西区教工宿舍14</View>\r\n              <View className='activity_text last'>报名人数：0/2</View>\r\n            </View>\r\n          </View>\r\n          <View id='two' className={this.state.currentBoxId === \"two\" ? \"show\" : \"hidden\"}>\r\n            {activities1.map((activity) => {\r\n              // const id = activity.id\r\n              return (\r\n                  <View className='activity_box' onClick={()=>this.handleitem1(activity.id)} key={activity.id}>\r\n                    <View className='activity_image'>\r\n                      <Image src={`${activity.icon}`} alt=''></Image>\r\n                      <View className='activity_absoluted'>{activity.status=='0'?'活动报名中':'报名已结束'}</View>\r\n                    </View>\r\n                    <View className='activity_title'>{activity.title}</View>\r\n                    <View className='activity_text'>时间：{activity.beginTime}-{activity.endTime}</View>\r\n                    <View className='activity_text'>地点：{activity.address}</View>\r\n                    <View className='activity_text last'>招募人数：{activity.count}/{activity.num}</View>\r\n                  </View>\r\n                  )\r\n              })}\r\n            <View className='activity_box'>\r\n              <View className='activity_image'>\r\n                <Image src='http://rt23tifhy.hb-bkt.clouddn.com/bg2.png' alt=''></Image>\r\n                <View className='activity_absoluted'>活动报名中</View>\r\n              </View>\r\n              <View className='activity_title'>社区公益服务大集</View>\r\n              <View className='activity_text'>时间：2021/05/06  09:00-12:00</View>\r\n              <View className='activity_text'>地点：武汉市洪山区洪山街韵湖社区</View>\r\n              <View className='activity_text last'>报名人数：101/200</View>\r\n            </View>\r\n            <View className='activity_box'>\r\n              <View className='activity_image'>\r\n                <Image src='http://rt23tifhy.hb-bkt.clouddn.com/bg2.png' alt=''></Image>\r\n                <View className='activity_absoluted'>活动报名中</View>\r\n              </View>\r\n              <View className='activity_title'>社区公益服务大集</View>\r\n              <View className='activity_text'>时间：2021/05/06  09:00-12:00</View>\r\n              <View className='activity_text'>地点：武汉市洪山区洪山街韵湖社区</View>\r\n              <View className='activity_text last'>报名人数：0/200</View>\r\n            </View>\r\n          </View>\r\n        </View>\r\n      </View>\r\n\r\n    )\r\n  }\r\n}","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/babel-loader/lib/index.js??ruleSet[1].rules[5].use[0]!./index.jsx\"\nvar config = {};\n\n\nvar inst = Page(createPageConfig(component, 'pages/stu_main/index', {root:{cn:[]}}, config || {}))\n\n\n"],"names":[],"sourceRoot":""}