{"version":3,"file":"pages/orgfound/index.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAGA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsBA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAGA;;;;;;;;;;;;;AChLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://theolder/._src_pages_orgfound_index.jsx","webpack://theolder/./src/pages/orgfound/index.jsx?5b80"],"sourcesContent":["import { Input, View,Image, Picker, Textarea, PageContainer } from '@tarojs/components'\r\nimport React, { useState } from 'react'\r\nimport './index.less'\r\nimport camera from '../../assets/organization/camera.png'\r\nimport Taro from '@tarojs/taro'\r\nimport { Fetch } from '../../service/fetch'\r\n\r\n\r\nexport default function AddOrg() {\r\n\r\n    const [name,setName] = useState('')\r\n    const [img,setImg] = useState('');\r\n    const [loc,setLoc] = useState('');\r\n    const [num,setNum] = useState('')\r\n    const [tel,setTel] = useState('')\r\n    const [content,setContent] = useState('');\r\n    const [base64,setBase64] = useState()\r\n    const [attention,setAttention] = useState('')\r\n    const [showAttention,setShowAttention] = useState(false)\r\n\r\n    const getName = e => {\r\n        setName(e.detail.value)\r\n    }\r\n\r\n    const chooseImg = () => {\r\n        console.log('11111111')\r\n        Taro.chooseImage({\r\n            count: 1,\r\n            sizeType: ['original'],\r\n            sourceType: ['album'],\r\n            success: res => {\r\n                let src = res.tempFilePaths[0];\r\n                setImg(src)\r\n                Taro.getFileSystemManager().readFile({\r\n                    filePath:src,\r\n                    encoding:'base64',\r\n                    success: response => {\r\n                        setBase64(response.data)\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    const getLoc = e => {\r\n        setLoc(e.detail.value)\r\n    }\r\n\r\n    const getNum = e => {\r\n        setNum(e.detail.value)\r\n    }\r\n\r\n    const getTel = e => {\r\n        setTel(e.detail.value)\r\n    }\r\n\r\n    const getContent = e => {\r\n        setContent(e.detail.value)\r\n    }\r\n\r\n    const submit = () => {\r\n        let newAttention = ''\r\n        if(name === '') {\r\n            newAttention += \"请填写组织名称\\n\"\r\n        } \r\n        \r\n        if(!base64){\r\n            newAttention += \"请选择图片\\n\"\r\n        }\r\n\r\n        if(!loc){\r\n            newAttention += \"请填写组织地点\\n\"\r\n        }\r\n\r\n        // if(date !== \"日期\" && start !== \"开始\" && end !== \"结束\"){\r\n        //     let time = new Date();\r\n        //     let d1 = Date.parse(date)\r\n        //     let d2 = time.getTime()\r\n        //     let t1 = time.setHours(start.split(\":\")[0],start.split(\":\")[1])\r\n        //     let t2 = time.setHours(end.split(\":\")[0],end.split(\":\")[1])\r\n        //     if(d2 < d1 || t2 <= t1){\r\n        //     newAttention += \"请选择正确的活动时间\\n\"\r\n        //     }\r\n        // }else {\r\n        //     newAttention += \"请选择正确的活动时间\\n\"\r\n        // }\r\n        \r\n        if(parseInt(num) <= 0){\r\n            newAttention += \"请正确填写组织的人数\\n\"\r\n        }\r\n\r\n        if(tel === ''){\r\n            newAttention += \"请填写联系电话\\n\"\r\n        }\r\n\r\n        if(content === ''){\r\n            newAttention += \"请填写组织简介\\n\"\r\n        }\r\n        \r\n\r\n        if(newAttention !== ''){\r\n            Taro.showToast({\r\n                title:'信息不完整！',\r\n                icon:'error',\r\n                duration:2000\r\n            })\r\n        }\r\n\r\n        const data = {\r\n            name: name,\r\n            logo: base64,\r\n            address: loc,\r\n            phone: tel,\r\n            brief: content,\r\n            icon: [base64],\r\n            count: num\r\n        }\r\n        Fetch('/organization/organization/establish',data)\r\n    }\r\n\r\n    return (\r\n        <View className='AddOrg'>\r\n            <View className='orgname'>\r\n                <View>名称：</View>\r\n                <Input type='text' className='name' onInput={getName} placeholder='请输入组织名称' />\r\n            </View>\r\n            <View className='orgimg'>\r\n                <View style='align-self:center;'>图片：</View>\r\n                <View className='img' onClick={chooseImg}>\r\n                    {img?<Image src={img} style='width:100px;height:100px;'></Image>:<Image src={camera} style='width:100px;height:100px;'></Image>}\r\n                </View>\r\n            </View>\r\n            <View className='orgloc'>\r\n                <View>位置：</View>\r\n                <Input type='text' className='loc' onInput={getLoc} placeholder='请输入位置' />\r\n            </View>\r\n            <View className='orgpeople'>\r\n                <View>人数：</View>\r\n                <Input type='text' className='num' onInput={getNum} placeholder='请输入人数' />\r\n            </View>\r\n            <View className='orgtel'>\r\n                <View>电话：</View>\r\n                <Input type='text' className='tel' onInput={getTel} placeholder='请输入电话' />\r\n            </View>\r\n            {/* <View className='acttime'>\r\n                <View>时间:</View>\r\n                <Picker mode='date' onChange={changeDate}>\r\n                    <View className='date'>\r\n                        {date}\r\n                    </View>\r\n                </Picker>\r\n                <View>-</View>\r\n                <Picker mode='time' onChange={changeStart}>\r\n                    <View className='start'>\r\n                        {start}\r\n                    </View>\r\n                </Picker>\r\n                <View>-</View>\r\n                <Picker mode='time' onChange={changeEnd} >\r\n                    <View className='end'>\r\n                        {end}\r\n                    </View>\r\n                </Picker>\r\n            </View> */}\r\n            <View className='orgcontent'>\r\n                <View>内容描述：</View>\r\n                <Textarea className='content' onInput={getContent} placeholder='请输入组织简介' />\r\n            </View>\r\n            <View className='submit' onClick={submit}>完成</View>\r\n            <View>\r\n                <PageContainer show={showAttention} position='top'>\r\n                <View>{attention}</View>\r\n                </PageContainer>\r\n            </View>\r\n        </View>\r\n    )\r\n}\r\n","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/babel-loader/lib/index.js??ruleSet[1].rules[5].use[0]!./index.jsx\"\nvar config = {};\n\n\nvar inst = Page(createPageConfig(component, 'pages/orgfound/index', {root:{cn:[]}}, config || {}))\n\n\n"],"names":[],"sourceRoot":""}